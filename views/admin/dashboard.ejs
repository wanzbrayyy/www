<%- include('../partials/header') %>

<div class="container" style="padding: 40px 20px; background: #f4f4f4; color: #333; min-height: 100vh;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 30px; border-bottom: 2px solid #bf9b30; padding-bottom: 10px;">
        <h2 style="font-family: sans-serif;">DASHBOARD ADMIN</h2>
        <div>
            <span style="margin-right: 15px;">Hello, <%= user.username %></span>
            <a href="/auth/logout" style="background: #000; color: #fff; padding: 8px 20px; border-radius: 4px;">Logout</a>
        </div>
    </div>

    <div style="background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 40px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 15px;">Home Header Images (3 Columns)</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
            <% heroes.forEach((hero, i) => { %>
                <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px; background: #fafafa;">
                    <img src="/uploads/<%= hero.image %>" style="height: 120px; object-fit: cover; margin-bottom: 10px; width: 100%;">
                    <div style="font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; height: 40px; overflow: hidden;"><%= hero.title.replace(/\n/g, ' ') %></div>
                    <a href="/admin/hero/edit/<%= hero._id %>" style="display: block; background: #bf9b30; color: #fff; text-align: center; padding: 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;">EDIT SLIDE <%= i+1 %></a>
                </div>
            <% }) %>
        </div>
    </div>

    <div style="background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 40px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 15px;">B2B Services List</h3>
        <div style="overflow-x: auto;">
            <table class="admin-table">
                <thead>
                    <tr style="background: #eee;">
                        <th style="width: 80px;">Image</th>
                        <th>Service Name</th>
                        <th>Description</th>
                        <th style="width: 80px;">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% services.forEach(svc => { %>
                        <tr>
                            <td><img src="/uploads/<%= svc.image %>" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;"></td>
                            <td><strong><%= svc.title %></strong></td>
                            <td style="font-size: 0.9rem; color: #666;"><%= svc.description %></td>
                            <td>
                                <a href="/admin/service/edit/<%= svc._id %>" class="btn-action" style="background: #28a745; color: #fff; display: inline-block; text-align: center;">Edit</a>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>

    <div style="background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 40px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3>Blog Articles</h3>
            <a href="/admin/article/create" style="background: #000; color: #bf9b30; padding: 8px 15px; border-radius: 20px; font-weight: bold;">+ New Article</a>
        </div>
        <table class="admin-table">
            <thead>
                <tr style="background: #eee;">
                    <th>Title</th>
                    <th>Date</th>
                    <th>Views</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% articles.forEach(art => { %>
                    <tr>
                        <td><%= art.title %></td>
                        <td><%= new Date(art.createdAt).toLocaleDateString() %></td>
                        <td><%= art.views %></td>
                        <td>
                            <a href="/admin/article/edit/<%= art._id %>" class="btn-action" style="background: #ffc107; color: #000;">Edit</a>
                            <form action="/admin/article/delete/<%= art._id %>?_method=DELETE" method="POST" style="display:inline;" onsubmit="return confirm('Delete?');">
                                <button type="submit" class="btn-action" style="background: #dc3545; color: #fff;">Del</button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
    
    <div style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 15px;">Inbox Messages</h3>
        <table class="admin-table">
            <thead>
                <tr style="background: #eee;">
                    <th>From</th>
                    <th>Email</th>
                    <th>Message</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <% messages.forEach(msg => { %>
                    <tr>
                        <td><strong><%= msg.name %></strong></td>
                        <td><%= msg.email %></td>
                        <td style="font-size: 0.9rem; color: #666;"><%= msg.message %></td>
                        <td>
                            <form action="/admin/message/delete/<%= msg._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Delete message?');">
                                <button type="submit" class="btn-action" style="background: #dc3545; color: #fff;">Delete</button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
                <% if(messages.length === 0) { %>
                    <tr><td colspan="4" style="text-align: center;">No new messages.</td></tr>
                <% } %>
            </tbody>
        </table>
    </div>

</div>

<%- include('../partials/footer') %>